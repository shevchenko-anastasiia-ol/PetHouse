# Web UI Service Configuration
quarkus.http.port=8083
quarkus.http.test-port=8090

# Animal Service REST Client
quarkus.rest-client.animal-service.url=http://localhost:8081
quarkus.rest-client.animal-service.scope=jakarta.inject.Singleton


# Adoption Service REST Client
quarkus.rest-client.adoption-service.url=http://localhost:8080
quarkus.rest-client.adoption-service.scope=jakarta.inject.Singleton

# Health Service REST Client
quarkus.rest-client.health-service.url=http://localhost:8082
quarkus.rest-client.health-service.scope=jakarta.inject.Singleton


quarkus.oidc-token-propagation.enabled=true

# Qute Templates Configuration
quarkus.qute.content-types.html=text/html

# Logging
quarkus.log.console.enable=true
quarkus.log.console.level=INFO
quarkus.log.category."shevchenko.webui".level=DEBUG

# CORS Configuration
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS,PATCH
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=*

# --- OpenID Connect (OIDC) ?????? ---
quarkus.oidc.auth-server-url=http://localhost:8180/realms/pethouse
quarkus.oidc.client-id=pethouse-ui
quarkus.oidc.credentials.secret=3tirGZ34jMg4VTH23vvrKs9swXSMu3Gu
quarkus.oidc.application-type=web-app

# Authentication paths
quarkus.oidc.authentication.redirect-path=/
quarkus.oidc.authentication.restore-path-after-redirect=true
quarkus.oidc.authentication.cookie-path=/

# Logout configuration
quarkus.oidc.logout.path=/logout
quarkus.oidc.logout.post-logout-path=/

# Token configuration
quarkus.oidc.token.issuer=http://localhost:8180/realms/pethouse
quarkus.oidc.token.principal-claim=preferred_username

# Public paths (accessible without authentication)
quarkus.http.auth.permission.public.paths=/,/index.html,/static/*,/resources/*
quarkus.http.auth.permission.public.policy=permit

# Authenticated paths (require login)
quarkus.http.auth.permission.authenticated.paths=/animals,/adoptions,/health-records
quarkus.http.auth.permission.authenticated.policy=authenticated

# Dev Mode Configuration (optional)
%dev.quarkus.oidc.auth-server-url=http://localhost:8180/realms/pethouse
%dev.quarkus.oidc.client-id=pethouse-ui
%dev.quarkus.oidc.credentials.secret=3tirGZ34jMg4VTH23vvrKs9swXSMu3Gu

quarkus.rest-client.animal-service.token-propagation=true
quarkus.rest-client.adoption-service.token-propagation=true
quarkus.rest-client.health-service.token-propagation=true

# ???????? token-propagation, ??????? providers
quarkus.rest-client.animal-service.providers=io.quarkus.oidc.token.propagation.reactive.AccessTokenRequestReactiveFilter
quarkus.rest-client.adoption-service.providers=io.quarkus.oidc.token.propagation.reactive.AccessTokenRequestReactiveFilter
quarkus.rest-client.health-service.providers=io.quarkus.oidc.token.propagation.reactive.AccessTokenRequestReactiveFilter

# Add these timeout and retry settings
quarkus.oidc.connection-delay=10s
quarkus.oidc.connection-retry-count=3
quarkus.oidc.connection-timeout=10s